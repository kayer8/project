import type { TaskTemplate } from '@/modules/task-templates/types';
import type { NightProgram } from '@/modules/night-programs/types';
import type { CopyTemplate } from '@/modules/copy-templates/types';
import type { Ticket } from '@/modules/tickets/types';
import type { AppConfig, ConfigChangeLog } from '@/modules/app-config/types';
import type {
  DashboardSummary,
  TrendPoint,
  FunnelStage,
  TaskRankingItem,
} from '@/modules/analytics/types';

export const mockTaskTemplates: TaskTemplate[] = [
  {
    id: 'TT-1024',
    title: '晨间重置',
    description: '用短暂呼吸重置开启一天。',
    type: 'timer',
    difficulty: 2,
    status: 'online',
    tags: {
      moods: ['tired'],
      directions: ['body'],
      traces: ['self_care'],
    },
    defaultDuration: 180,
    createdAt: '2026-01-05T08:20:00Z',
    createdBy: '王敏',
    updatedAt: '2026-01-12T09:30:00Z',
    updatedBy: '王敏',
    performance: {
      range7d: {
        exposure: 1220,
        completed: 760,
        skipped: 210,
        completionRate: 0.62,
        skipRate: 0.17,
        replaceRate: 0.05,
        skipReasons: ['太长', '不相关', '已经做过'],
        replaceReasons: ['完成率低', '用户换一换'],
        noteConversionRate: 0.28,
      },
      range30d: {
        exposure: 4820,
        completed: 2980,
        skipped: 720,
        completionRate: 0.62,
        skipRate: 0.15,
        replaceRate: 0.06,
        skipReasons: ['太长', '不相关', '已经做过'],
        replaceReasons: ['完成率低', '用户换一换'],
        noteConversionRate: 0.26,
      },
    },
  },
  {
    id: 'TT-1051',
    title: '三件小胜利',
    description: '记录今天的三件小胜利。',
    type: 'steps',
    difficulty: 1,
    status: 'online',
    tags: {
      moods: ['calm'],
      directions: ['emotion'],
      traces: ['gratitude', 'observe'],
    },
    steps: ['说出一个小胜利', '说出一个支持', '说出一个下一步'],
    createdAt: '2026-01-04T12:10:00Z',
    createdBy: '李强',
    updatedAt: '2026-01-13T11:10:00Z',
    updatedBy: '李强',
    performance: {
      range7d: {
        exposure: 980,
        completed: 690,
        skipped: 130,
        completionRate: 0.7,
        skipRate: 0.13,
        replaceRate: 0.03,
        skipReasons: ['文案太长', '暂时不想', '已经做过'],
        replaceReasons: ['用户换一换'],
        noteConversionRate: 0.35,
      },
      range30d: {
        exposure: 3650,
        completed: 2570,
        skipped: 430,
        completionRate: 0.7,
        skipRate: 0.12,
        replaceRate: 0.04,
        skipReasons: ['文案太长', '暂时不想', '已经做过'],
        replaceReasons: ['用户换一换'],
        noteConversionRate: 0.33,
      },
    },
  },
  {
    id: 'TT-1102',
    title: '自由书写',
    description: '自由写下几分钟的想法。',
    type: 'free',
    difficulty: 3,
    status: 'offline',
    tags: {
      moods: ['anxious'],
      directions: ['emotion'],
      traces: ['observe'],
    },
    createdAt: '2025-12-28T10:20:00Z',
    createdBy: '陈洁',
    updatedAt: '2026-01-10T16:40:00Z',
    updatedBy: '陈洁',
    performance: {
      range7d: {
        exposure: 540,
        completed: 190,
        skipped: 220,
        completionRate: 0.35,
        skipRate: 0.41,
        replaceRate: 0.12,
        skipReasons: ['太开放', '不相关', '没时间'],
        replaceReasons: ['完成率低', '用户换一换'],
        noteConversionRate: 0.18,
      },
      range30d: {
        exposure: 2010,
        completed: 760,
        skipped: 820,
        completionRate: 0.38,
        skipRate: 0.41,
        replaceRate: 0.1,
        skipReasons: ['太开放', '不相关', '没时间'],
        replaceReasons: ['完成率低', '用户换一换'],
        noteConversionRate: 0.2,
      },
    },
  },
  {
    id: 'TT-1188',
    title: '身体扫描小练习',
    description: '短暂身体扫描，放松肩颈。',
    type: 'timer',
    difficulty: 2,
    status: 'online',
    tags: {
      moods: ['empty'],
      directions: ['body'],
      traces: ['self_care'],
    },
    defaultDuration: 240,
    createdAt: '2025-12-30T09:20:00Z',
    createdBy: '赵琳',
    updatedAt: '2026-01-14T10:10:00Z',
    updatedBy: '赵琳',
    performance: {
      range7d: {
        exposure: 860,
        completed: 540,
        skipped: 160,
        completionRate: 0.63,
        skipRate: 0.19,
        replaceRate: 0.04,
        skipReasons: ['太长', '已经做过', '暂时不想'],
        replaceReasons: ['用户换一换'],
        noteConversionRate: 0.22,
      },
      range30d: {
        exposure: 3120,
        completed: 1980,
        skipped: 510,
        completionRate: 0.63,
        skipRate: 0.16,
        replaceRate: 0.05,
        skipReasons: ['太长', '已经做过', '暂时不想'],
        replaceReasons: ['用户换一换'],
        noteConversionRate: 0.24,
      },
    },
  },
  {
    id: 'TT-1210',
    title: '夜间放松',
    description: '放下一个你无法控制的事情。',
    type: 'steps',
    difficulty: 1,
    status: 'offline',
    tags: {
      moods: ['anxious'],
      directions: ['emotion'],
      traces: ['self_care'],
    },
    steps: ['说出一个担忧', '说出一个边界', '说出一个释然'],
    createdAt: '2025-12-22T11:50:00Z',
    createdBy: '孙倩',
    updatedAt: '2026-01-08T13:20:00Z',
    updatedBy: '孙倩',
    performance: {
      range7d: {
        exposure: 410,
        completed: 210,
        skipped: 120,
        completionRate: 0.51,
        skipRate: 0.29,
        replaceRate: 0.09,
        skipReasons: ['不相关', '已经做过', '没时间'],
        replaceReasons: ['完成率低'],
        noteConversionRate: 0.2,
      },
      range30d: {
        exposure: 1620,
        completed: 820,
        skipped: 440,
        completionRate: 0.51,
        skipRate: 0.27,
        replaceRate: 0.09,
        skipReasons: ['不相关', '已经做过', '没时间'],
        replaceReasons: ['完成率低'],
        noteConversionRate: 0.2,
      },
    },
  },
];

export const mockNightPrograms: NightProgram[] = [
  {
    id: 'NP-3001',
    title: '慢下来',
    type: 'timer',
    duration: 300,
    status: 'online',
    tags: {
      moods: ['tired'],
      directions: ['sleep'],
    },
    content: {
      timerText: '用缓慢的节奏数呼吸。',
    },
    createdAt: '2026-01-02T20:10:00Z',
    createdBy: '王敏',
    updatedAt: '2026-01-13T22:00:00Z',
    updatedBy: '王敏',
    performance: {
      range7d: {
        exposure: 880,
        completionRate: 0.58,
        exitRate: 0.22,
      },
    },
  },
  {
    id: 'NP-3009',
    title: '夜间自检',
    type: 'questions',
    status: 'online',
    tags: {
      moods: ['anxious'],
      directions: ['emotion'],
    },
    content: {
      questions: [
        {
          id: 'Q1',
          text: '今天你感到被支持了吗？',
          options: ['是', '否', '跳过'],
          distribution: [
            { option: '是', rate: 0.52 },
            { option: '否', rate: 0.31 },
            { option: '跳过', rate: 0.17 },
          ],
        },
        {
          id: 'Q2',
          text: '今天有片刻的平静吗？',
          options: ['是', '否', '跳过'],
          distribution: [
            { option: '是', rate: 0.44 },
            { option: '否', rate: 0.39 },
            { option: '跳过', rate: 0.17 },
          ],
        },
      ],
    },
    createdAt: '2025-12-28T21:00:00Z',
    createdBy: '李强',
    updatedAt: '2026-01-14T20:30:00Z',
    updatedBy: '李强',
    performance: {
      range7d: {
        exposure: 620,
        completionRate: 0.46,
        exitRate: 0.28,
        questionStats: {
          Q1: [
            { option: '是', rate: 0.52 },
            { option: '否', rate: 0.31 },
            { option: '跳过', rate: 0.17 },
          ],
          Q2: [
            { option: '是', rate: 0.44 },
            { option: '否', rate: 0.39 },
            { option: '跳过', rate: 0.17 },
          ],
        },
      },
    },
  },
  {
    id: 'NP-3017',
    title: '助眠音频',
    type: 'audio',
    duration: 420,
    status: 'offline',
    tags: {
      moods: ['empty'],
      directions: ['sleep'],
    },
    content: {
      audioUrl: 'https://example.com/audio/sleep-loop.mp3',
      text: '柔和的环境音帮助入睡。',
    },
    createdAt: '2025-12-18T22:10:00Z',
    createdBy: '陈洁',
    updatedAt: '2026-01-06T23:10:00Z',
    updatedBy: '陈洁',
    performance: {
      range7d: {
        exposure: 260,
        completionRate: 0.34,
        exitRate: 0.4,
      },
    },
  },
  {
    id: 'NP-3024',
    title: '安静收尾',
    type: 'text',
    status: 'online',
    tags: {
      moods: ['calm'],
      directions: ['emotion'],
    },
    content: {
      text: '在夜晚结束前记录一个温柔的念头。',
    },
    createdAt: '2025-12-20T21:40:00Z',
    createdBy: '赵琳',
    updatedAt: '2026-01-12T22:20:00Z',
    updatedBy: '赵琳',
    performance: {
      range7d: {
        exposure: 410,
        completionRate: 0.52,
        exitRate: 0.21,
      },
    },
  },
];

export const mockCopyTemplates: CopyTemplate[] = [
  {
    id: 'CT-401',
    type: 'task_complete',
    content: '做得好，小胜利也很重要。',
    conditions: { trace: 'self_care' },
    weight: 1.2,
    status: 'enabled',
    usage7d: 320,
    createdAt: '2025-12-22T10:00:00Z',
    createdBy: '王敏',
    updatedAt: '2026-01-11T10:20:00Z',
    updatedBy: '王敏',
  },
  {
    id: 'CT-402',
    type: 'night_closing',
    content: '今夜就到这里也很好。',
    conditions: { mood: 'tired' },
    weight: 1,
    status: 'enabled',
    usage7d: 210,
    createdAt: '2025-12-18T11:40:00Z',
    createdBy: '李强',
    updatedAt: '2026-01-12T12:10:00Z',
    updatedBy: '李强',
  },
  {
    id: 'CT-403',
    type: 'empty_state',
    content: '还没有任务，试试快速重置？',
    status: 'disabled',
    usage7d: 0,
    createdAt: '2025-12-10T09:00:00Z',
    createdBy: '陈洁',
    updatedAt: '2026-01-02T09:10:00Z',
    updatedBy: '陈洁',
  },
  {
    id: 'CT-404',
    type: 'error',
    content: '出了点问题，请稍后再试。',
    status: 'enabled',
    usage7d: 55,
    createdAt: '2025-12-14T09:10:00Z',
    createdBy: '赵琳',
    updatedAt: '2026-01-08T09:20:00Z',
    updatedBy: '赵琳',
  },
  {
    id: 'CT-405',
    type: 'review',
    content: '回望今天，最有意义的是什么？',
    conditions: { direction: 'emotion' },
    weight: 0.9,
    status: 'disabled',
    usage7d: 40,
    createdAt: '2025-12-05T10:30:00Z',
    createdBy: '孙倩',
    updatedAt: '2026-01-07T10:30:00Z',
    updatedBy: '孙倩',
  },
];

export const mockTickets: Ticket[] = [
  {
    id: 'TK-9001',
    type: 'bug',
    status: 'new',
    summary: 'iOS 17 任务计时卡住',
    content: '点击开始后计时停在 00:00。',
    user: {
      id: 'U-7F3A',
      version: '1.4.2',
      device: 'iPhone 13',
      os: 'iOS 17.2',
      activeDays: 12,
      isNew: false,
    },
    createdAt: '2026-01-14T08:12:00Z',
    assignee: '',
    tags: ['task', 'performance'],
    timeline: [
      { at: '2026-01-14T08:12:00Z', actor: '系统', action: '工单已创建' },
    ],
    related: {
      taskTemplateId: 'TT-1024',
    },
  },
  {
    id: 'TK-9002',
    type: 'suggestion',
    status: 'in_progress',
    summary: '希望增加夜间音频内容',
    content: '希望夜间音频引导更丰富。',
    user: {
      id: 'U-8AA1',
      version: '1.4.1',
      device: 'Pixel 7',
      os: 'Android 14',
      activeDays: 32,
      isNew: false,
    },
    createdAt: '2026-01-13T18:22:00Z',
    assignee: '李强',
    tags: ['night'],
    timeline: [
      { at: '2026-01-13T18:22:00Z', actor: '系统', action: '工单已创建' },
      { at: '2026-01-14T09:00:00Z', actor: '李强', action: '已指派', note: '检查音频库。' },
    ],
    related: {
      nightProgramId: 'NP-3017',
    },
  },
  {
    id: 'TK-9003',
    type: 'other',
    status: 'resolved',
    summary: '今日页间距偏紧',
    content: '小屏设备上有卡片重叠。',
    user: {
      id: 'U-1BD2',
      version: '1.4.0',
      device: 'Galaxy S23',
      os: 'Android 13',
      activeDays: 3,
      isNew: true,
    },
    createdAt: '2026-01-11T12:42:00Z',
    assignee: '赵琳',
    tags: ['ui'],
    timeline: [
      { at: '2026-01-11T12:42:00Z', actor: '系统', action: '工单已创建' },
      { at: '2026-01-12T08:30:00Z', actor: '赵琳', action: '标记已解决', note: '已在 v1.4.3 修复间距。' },
    ],
  },
  {
    id: 'TK-9004',
    type: 'bug',
    status: 'closed',
    summary: '导出按钮无响应',
    content: '导出 CSV 没有触发下载。',
    user: {
      id: 'U-3C11',
      version: '1.3.9',
      device: 'iPhone 12',
      os: 'iOS 16.7',
      activeDays: 44,
      isNew: false,
    },
    createdAt: '2026-01-08T09:02:00Z',
    assignee: '王敏',
    tags: ['performance'],
    timeline: [
      { at: '2026-01-08T09:02:00Z', actor: '系统', action: '工单已创建' },
      { at: '2026-01-09T10:10:00Z', actor: '王敏', action: '标记已解决', note: '后端已修复。' },
      { at: '2026-01-10T08:10:00Z', actor: '王敏', action: '已关闭', note: '预发已验证。' },
    ],
  },
];

export const mockAppConfig: AppConfig = {
  dailyTaskCount: 3,
  cooldownDays: 7,
  directionCoverageRequired: true,
  moodWeight: 60,
  templateExposureLimit: 2,
  refreshLimitPerDay: 2,
  refreshScope: 'any',
  skipProtection: true,
  nightSortStrategy: 'completion',
  nightTraceTags: ['self_care'],
  version: 12,
  status: 'draft',
  updatedAt: '2026-01-14T09:20:00Z',
  updatedBy: '李强',
};

export const mockConfigLogs: ConfigChangeLog[] = [
  {
    version: 12,
    updatedAt: '2026-01-14T09:20:00Z',
    updatedBy: '李强',
    diff: '心情权重调整为 60；替换范围改为任意位置。',
  },
  {
    version: 11,
    updatedAt: '2026-01-10T09:20:00Z',
    updatedBy: '王敏',
    diff: '开启跳过保护；冷却天数设为 7 天。',
  },
  {
    version: 10,
    updatedAt: '2026-01-05T09:20:00Z',
    updatedBy: '赵琳',
    diff: '每日换一换上限降为 2。',
  },
];

export const mockDashboardSummary: DashboardSummary = {
  today: {
    dau: 1420,
    newUsers: 130,
    retention1d: 0.32,
    taskCompletionRate: 0.54,
    nightCompletionRate: 0.41,
    refreshRate: 0.18,
  },
  yesterday: {
    dau: 1380,
    newUsers: 118,
    retention1d: 0.3,
    taskCompletionRate: 0.52,
    nightCompletionRate: 0.39,
    refreshRate: 0.17,
  },
  range7d: {
    dau: 1310,
    newUsers: 110,
    retention1d: 0.29,
    taskCompletionRate: 0.51,
    nightCompletionRate: 0.38,
    refreshRate: 0.16,
  },
};

export const mockTrendPoints: TrendPoint[] = [
  { date: '2026-01-08', dau: 1180, taskCompletionRate: 0.49, nightCompletionRate: 0.36 },
  { date: '2026-01-09', dau: 1230, taskCompletionRate: 0.5, nightCompletionRate: 0.37 },
  { date: '2026-01-10', dau: 1290, taskCompletionRate: 0.51, nightCompletionRate: 0.38 },
  { date: '2026-01-11', dau: 1360, taskCompletionRate: 0.53, nightCompletionRate: 0.39 },
  { date: '2026-01-12', dau: 1330, taskCompletionRate: 0.52, nightCompletionRate: 0.4 },
  { date: '2026-01-13', dau: 1390, taskCompletionRate: 0.53, nightCompletionRate: 0.41 },
  { date: '2026-01-14', dau: 1420, taskCompletionRate: 0.54, nightCompletionRate: 0.41 },
];

export const mockTaskFunnel: FunnelStage[] = [
  { stage: '打开今日页', users: 1420, rate: 1 },
  { stage: '进入任务详情', users: 980, rate: 0.69 },
  { stage: '完成任一任务', users: 760, rate: 0.54 },
  { stage: '写一句', users: 220, rate: 0.15 },
  { stage: '跳过', users: 320, rate: 0.23 },
];

export const mockNightFunnel: FunnelStage[] = [
  { stage: '进入夜间入口', users: 680, rate: 1 },
  { stage: '开始引导', users: 520, rate: 0.76 },
  { stage: '完成引导', users: 280, rate: 0.41 },
  { stage: '退出', users: 180, rate: 0.26 },
];

export const mockTaskRanking: TaskRankingItem[] = [
  {
    id: 'TT-1051',
    title: '三件小胜利',
    completionRate: 0.7,
    skipRate: 0.13,
    replaceRate: 0.03,
  },
  {
    id: 'TT-1188',
    title: '身体扫描小练习',
    completionRate: 0.63,
    skipRate: 0.19,
    replaceRate: 0.04,
  },
  {
    id: 'TT-1024',
    title: '晨间重置',
    completionRate: 0.62,
    skipRate: 0.17,
    replaceRate: 0.05,
  },
  {
    id: 'TT-1210',
    title: '夜间放松',
    completionRate: 0.51,
    skipRate: 0.29,
    replaceRate: 0.09,
  },
  {
    id: 'TT-1102',
    title: '自由书写',
    completionRate: 0.35,
    skipRate: 0.41,
    replaceRate: 0.12,
  },
];
