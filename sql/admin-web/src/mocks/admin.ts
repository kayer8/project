import type { TaskTemplate } from '@/modules/task-templates/types';
import type { NightProgram } from '@/modules/night-programs/types';
import type { CopyTemplate } from '@/modules/copy-templates/types';
import type { Ticket } from '@/modules/tickets/types';
import type { AppConfig, ConfigChangeLog } from '@/modules/app-config/types';
import type {
  DashboardSummary,
  TrendPoint,
  FunnelStage,
  TaskRankingItem,
} from '@/modules/analytics/types';

export const mockTaskTemplates: TaskTemplate[] = [
  {
    id: 'TT-1024',
    title: 'Morning reset',
    description: 'Quick breathing reset to start the day.',
    type: 'timer',
    difficulty: 2,
    status: 'online',
    tags: {
      moods: ['tired'],
      directions: ['body'],
      traces: ['self_care'],
    },
    defaultDuration: 180,
    createdAt: '2026-01-05T08:20:00Z',
    createdBy: 'Alice',
    updatedAt: '2026-01-12T09:30:00Z',
    updatedBy: 'Alice',
    performance: {
      range7d: {
        exposure: 1220,
        completed: 760,
        skipped: 210,
        completionRate: 0.62,
        skipRate: 0.17,
        replaceRate: 0.05,
        skipReasons: ['Too long', 'Not relevant', 'Already done'],
        replaceReasons: ['Low completion', 'User switched'],
        noteConversionRate: 0.28,
      },
      range30d: {
        exposure: 4820,
        completed: 2980,
        skipped: 720,
        completionRate: 0.62,
        skipRate: 0.15,
        replaceRate: 0.06,
        skipReasons: ['Too long', 'Not relevant', 'Already done'],
        replaceReasons: ['Low completion', 'User switched'],
        noteConversionRate: 0.26,
      },
    },
  },
  {
    id: 'TT-1051',
    title: 'Three tiny wins',
    description: 'Capture three tiny wins from today.',
    type: 'steps',
    difficulty: 1,
    status: 'online',
    tags: {
      moods: ['calm'],
      directions: ['emotion'],
      traces: ['gratitude', 'observe'],
    },
    steps: ['Name one win', 'Name one support', 'Name one next step'],
    createdAt: '2026-01-04T12:10:00Z',
    createdBy: 'Ben',
    updatedAt: '2026-01-13T11:10:00Z',
    updatedBy: 'Ben',
    performance: {
      range7d: {
        exposure: 980,
        completed: 690,
        skipped: 130,
        completionRate: 0.70,
        skipRate: 0.13,
        replaceRate: 0.03,
        skipReasons: ['Too wordy', 'Not now', 'Already done'],
        replaceReasons: ['User switched'],
        noteConversionRate: 0.35,
      },
      range30d: {
        exposure: 3650,
        completed: 2570,
        skipped: 430,
        completionRate: 0.70,
        skipRate: 0.12,
        replaceRate: 0.04,
        skipReasons: ['Too wordy', 'Not now', 'Already done'],
        replaceReasons: ['User switched'],
        noteConversionRate: 0.33,
      },
    },
  },
  {
    id: 'TT-1102',
    title: 'Free journal',
    description: 'Write a free-form reflection for a few minutes.',
    type: 'free',
    difficulty: 3,
    status: 'offline',
    tags: {
      moods: ['anxious'],
      directions: ['emotion'],
      traces: ['observe'],
    },
    createdAt: '2025-12-28T10:20:00Z',
    createdBy: 'Catherine',
    updatedAt: '2026-01-10T16:40:00Z',
    updatedBy: 'Catherine',
    performance: {
      range7d: {
        exposure: 540,
        completed: 190,
        skipped: 220,
        completionRate: 0.35,
        skipRate: 0.41,
        replaceRate: 0.12,
        skipReasons: ['Too open', 'Not relevant', 'No time'],
        replaceReasons: ['Low completion', 'User switched'],
        noteConversionRate: 0.18,
      },
      range30d: {
        exposure: 2010,
        completed: 760,
        skipped: 820,
        completionRate: 0.38,
        skipRate: 0.41,
        replaceRate: 0.1,
        skipReasons: ['Too open', 'Not relevant', 'No time'],
        replaceReasons: ['Low completion', 'User switched'],
        noteConversionRate: 0.2,
      },
    },
  },
  {
    id: 'TT-1188',
    title: 'Body scan mini',
    description: 'Short body scan to relax your shoulders.',
    type: 'timer',
    difficulty: 2,
    status: 'online',
    tags: {
      moods: ['empty'],
      directions: ['body'],
      traces: ['self_care'],
    },
    defaultDuration: 240,
    createdAt: '2025-12-30T09:20:00Z',
    createdBy: 'Daisy',
    updatedAt: '2026-01-14T10:10:00Z',
    updatedBy: 'Daisy',
    performance: {
      range7d: {
        exposure: 860,
        completed: 540,
        skipped: 160,
        completionRate: 0.63,
        skipRate: 0.19,
        replaceRate: 0.04,
        skipReasons: ['Too long', 'Already done', 'Not now'],
        replaceReasons: ['User switched'],
        noteConversionRate: 0.22,
      },
      range30d: {
        exposure: 3120,
        completed: 1980,
        skipped: 510,
        completionRate: 0.63,
        skipRate: 0.16,
        replaceRate: 0.05,
        skipReasons: ['Too long', 'Already done', 'Not now'],
        replaceReasons: ['User switched'],
        noteConversionRate: 0.24,
      },
    },
  },
  {
    id: 'TT-1210',
    title: 'Evening release',
    description: 'Let go of one thing you cannot control.',
    type: 'steps',
    difficulty: 1,
    status: 'offline',
    tags: {
      moods: ['anxious'],
      directions: ['emotion'],
      traces: ['self_care'],
    },
    steps: ['Name one worry', 'Name one boundary', 'Name one relief'],
    createdAt: '2025-12-22T11:50:00Z',
    createdBy: 'Elena',
    updatedAt: '2026-01-08T13:20:00Z',
    updatedBy: 'Elena',
    performance: {
      range7d: {
        exposure: 410,
        completed: 210,
        skipped: 120,
        completionRate: 0.51,
        skipRate: 0.29,
        replaceRate: 0.09,
        skipReasons: ['Not relevant', 'Already done', 'No time'],
        replaceReasons: ['Low completion'],
        noteConversionRate: 0.2,
      },
      range30d: {
        exposure: 1620,
        completed: 820,
        skipped: 440,
        completionRate: 0.51,
        skipRate: 0.27,
        replaceRate: 0.09,
        skipReasons: ['Not relevant', 'Already done', 'No time'],
        replaceReasons: ['Low completion'],
        noteConversionRate: 0.2,
      },
    },
  },
];

export const mockNightPrograms: NightProgram[] = [
  {
    id: 'NP-3001',
    title: 'Slow down',
    type: 'timer',
    duration: 300,
    status: 'online',
    tags: {
      moods: ['tired'],
      directions: ['sleep'],
    },
    content: {
      timerText: 'Let your breathing slow down with a gentle count.',
    },
    createdAt: '2026-01-02T20:10:00Z',
    createdBy: 'Alice',
    updatedAt: '2026-01-13T22:00:00Z',
    updatedBy: 'Alice',
    performance: {
      range7d: {
        exposure: 880,
        completionRate: 0.58,
        exitRate: 0.22,
      },
    },
  },
  {
    id: 'NP-3009',
    title: 'Night check-in',
    type: 'questions',
    status: 'online',
    tags: {
      moods: ['anxious'],
      directions: ['emotion'],
    },
    content: {
      questions: [
        {
          id: 'Q1',
          text: 'Did you feel supported today?',
          options: ['Yes', 'No', 'Skip'],
          distribution: [
            { option: 'Yes', rate: 0.52 },
            { option: 'No', rate: 0.31 },
            { option: 'Skip', rate: 0.17 },
          ],
        },
        {
          id: 'Q2',
          text: 'Was there a moment of calm?',
          options: ['Yes', 'No', 'Skip'],
          distribution: [
            { option: 'Yes', rate: 0.44 },
            { option: 'No', rate: 0.39 },
            { option: 'Skip', rate: 0.17 },
          ],
        },
      ],
    },
    createdAt: '2025-12-28T21:00:00Z',
    createdBy: 'Ben',
    updatedAt: '2026-01-14T20:30:00Z',
    updatedBy: 'Ben',
    performance: {
      range7d: {
        exposure: 620,
        completionRate: 0.46,
        exitRate: 0.28,
        questionStats: {
          Q1: [
            { option: 'Yes', rate: 0.52 },
            { option: 'No', rate: 0.31 },
            { option: 'Skip', rate: 0.17 },
          ],
          Q2: [
            { option: 'Yes', rate: 0.44 },
            { option: 'No', rate: 0.39 },
            { option: 'Skip', rate: 0.17 },
          ],
        },
      },
    },
  },
  {
    id: 'NP-3017',
    title: 'Sleep audio loop',
    type: 'audio',
    duration: 420,
    status: 'offline',
    tags: {
      moods: ['empty'],
      directions: ['sleep'],
    },
    content: {
      audioUrl: 'https://example.com/audio/sleep-loop.mp3',
      text: 'Soft ambient audio to ease into rest.',
    },
    createdAt: '2025-12-18T22:10:00Z',
    createdBy: 'Catherine',
    updatedAt: '2026-01-06T23:10:00Z',
    updatedBy: 'Catherine',
    performance: {
      range7d: {
        exposure: 260,
        completionRate: 0.34,
        exitRate: 0.4,
      },
    },
  },
  {
    id: 'NP-3024',
    title: 'Quiet wrap-up',
    type: 'text',
    status: 'online',
    tags: {
      moods: ['calm'],
      directions: ['emotion'],
    },
    content: {
      text: 'Close the night by noting one gentle thought.',
    },
    createdAt: '2025-12-20T21:40:00Z',
    createdBy: 'Daisy',
    updatedAt: '2026-01-12T22:20:00Z',
    updatedBy: 'Daisy',
    performance: {
      range7d: {
        exposure: 410,
        completionRate: 0.52,
        exitRate: 0.21,
      },
    },
  },
];

export const mockCopyTemplates: CopyTemplate[] = [
  {
    id: 'CT-401',
    type: 'task_complete',
    content: 'Nice work. A small win still counts.',
    conditions: { trace: 'self_care' },
    weight: 1.2,
    status: 'enabled',
    usage7d: 320,
    createdAt: '2025-12-22T10:00:00Z',
    createdBy: 'Alice',
    updatedAt: '2026-01-11T10:20:00Z',
    updatedBy: 'Alice',
  },
  {
    id: 'CT-402',
    type: 'night_closing',
    content: 'Let this be enough for tonight.',
    conditions: { mood: 'tired' },
    weight: 1,
    status: 'enabled',
    usage7d: 210,
    createdAt: '2025-12-18T11:40:00Z',
    createdBy: 'Ben',
    updatedAt: '2026-01-12T12:10:00Z',
    updatedBy: 'Ben',
  },
  {
    id: 'CT-403',
    type: 'empty_state',
    content: 'No tasks yet. Try a quick reset?',
    status: 'disabled',
    usage7d: 0,
    createdAt: '2025-12-10T09:00:00Z',
    createdBy: 'Catherine',
    updatedAt: '2026-01-02T09:10:00Z',
    updatedBy: 'Catherine',
  },
  {
    id: 'CT-404',
    type: 'error',
    content: 'Something went wrong. Please try again.',
    status: 'enabled',
    usage7d: 55,
    createdAt: '2025-12-14T09:10:00Z',
    createdBy: 'Daisy',
    updatedAt: '2026-01-08T09:20:00Z',
    updatedBy: 'Daisy',
  },
  {
    id: 'CT-405',
    type: 'review',
    content: 'Looking back, what felt most meaningful?',
    conditions: { direction: 'emotion' },
    weight: 0.9,
    status: 'disabled',
    usage7d: 40,
    createdAt: '2025-12-05T10:30:00Z',
    createdBy: 'Elena',
    updatedAt: '2026-01-07T10:30:00Z',
    updatedBy: 'Elena',
  },
];

export const mockTickets: Ticket[] = [
  {
    id: 'TK-9001',
    type: 'bug',
    status: 'new',
    summary: 'Task timer freezes on iOS 17.',
    content: 'Timer stuck at 00:00 after tapping start.',
    user: {
      id: 'U-7F3A',
      version: '1.4.2',
      device: 'iPhone 13',
      os: 'iOS 17.2',
      activeDays: 12,
      isNew: false,
    },
    createdAt: '2026-01-14T08:12:00Z',
    assignee: '',
    tags: ['task', 'performance'],
    timeline: [
      { at: '2026-01-14T08:12:00Z', actor: 'System', action: 'Ticket created' },
    ],
    related: {
      taskTemplateId: 'TT-1024',
    },
  },
  {
    id: 'TK-9002',
    type: 'suggestion',
    status: 'in_progress',
    summary: 'Need more night audio options.',
    content: 'Add more variety in night audio guides.',
    user: {
      id: 'U-8AA1',
      version: '1.4.1',
      device: 'Pixel 7',
      os: 'Android 14',
      activeDays: 32,
      isNew: false,
    },
    createdAt: '2026-01-13T18:22:00Z',
    assignee: 'Ben',
    tags: ['night'],
    timeline: [
      { at: '2026-01-13T18:22:00Z', actor: 'System', action: 'Ticket created' },
      { at: '2026-01-14T09:00:00Z', actor: 'Ben', action: 'Assigned', note: 'Review audio library.' },
    ],
    related: {
      nightProgramId: 'NP-3017',
    },
  },
  {
    id: 'TK-9003',
    type: 'other',
    status: 'resolved',
    summary: 'UI spacing feels tight on today page.',
    content: 'Some cards overlap on small screens.',
    user: {
      id: 'U-1BD2',
      version: '1.4.0',
      device: 'Galaxy S23',
      os: 'Android 13',
      activeDays: 3,
      isNew: true,
    },
    createdAt: '2026-01-11T12:42:00Z',
    assignee: 'Daisy',
    tags: ['ui'],
    timeline: [
      { at: '2026-01-11T12:42:00Z', actor: 'System', action: 'Ticket created' },
      { at: '2026-01-12T08:30:00Z', actor: 'Daisy', action: 'Marked resolved', note: 'Fixed spacing in v1.4.3.' },
    ],
  },
  {
    id: 'TK-9004',
    type: 'bug',
    status: 'closed',
    summary: 'Export button does nothing.',
    content: 'Export CSV is not triggering download.',
    user: {
      id: 'U-3C11',
      version: '1.3.9',
      device: 'iPhone 12',
      os: 'iOS 16.7',
      activeDays: 44,
      isNew: false,
    },
    createdAt: '2026-01-08T09:02:00Z',
    assignee: 'Alice',
    tags: ['performance'],
    timeline: [
      { at: '2026-01-08T09:02:00Z', actor: 'System', action: 'Ticket created' },
      { at: '2026-01-09T10:10:00Z', actor: 'Alice', action: 'Marked resolved', note: 'Backend fixed.' },
      { at: '2026-01-10T08:10:00Z', actor: 'Alice', action: 'Closed', note: 'Verified in staging.' },
    ],
  },
];

export const mockAppConfig: AppConfig = {
  dailyTaskCount: 3,
  cooldownDays: 7,
  directionCoverageRequired: true,
  moodWeight: 60,
  templateExposureLimit: 2,
  refreshLimitPerDay: 2,
  refreshScope: 'any',
  skipProtection: true,
  nightSortStrategy: 'completion',
  nightTraceTags: ['self_care'],
  version: 12,
  status: 'draft',
  updatedAt: '2026-01-14T09:20:00Z',
  updatedBy: 'Ben',
};

export const mockConfigLogs: ConfigChangeLog[] = [
  {
    version: 12,
    updatedAt: '2026-01-14T09:20:00Z',
    updatedBy: 'Ben',
    diff: 'Adjusted mood weight to 60; updated refresh scope to any.',
  },
  {
    version: 11,
    updatedAt: '2026-01-10T09:20:00Z',
    updatedBy: 'Alice',
    diff: 'Enabled skip protection; set cooldown to 7 days.',
  },
  {
    version: 10,
    updatedAt: '2026-01-05T09:20:00Z',
    updatedBy: 'Daisy',
    diff: 'Reduced refresh limit per day to 2.',
  },
];

export const mockDashboardSummary: DashboardSummary = {
  today: {
    dau: 1420,
    newUsers: 130,
    retention1d: 0.32,
    taskCompletionRate: 0.54,
    nightCompletionRate: 0.41,
    refreshRate: 0.18,
  },
  yesterday: {
    dau: 1380,
    newUsers: 118,
    retention1d: 0.3,
    taskCompletionRate: 0.52,
    nightCompletionRate: 0.39,
    refreshRate: 0.17,
  },
  range7d: {
    dau: 1310,
    newUsers: 110,
    retention1d: 0.29,
    taskCompletionRate: 0.51,
    nightCompletionRate: 0.38,
    refreshRate: 0.16,
  },
};

export const mockTrendPoints: TrendPoint[] = [
  { date: '2026-01-08', dau: 1180, taskCompletionRate: 0.49, nightCompletionRate: 0.36 },
  { date: '2026-01-09', dau: 1230, taskCompletionRate: 0.5, nightCompletionRate: 0.37 },
  { date: '2026-01-10', dau: 1290, taskCompletionRate: 0.51, nightCompletionRate: 0.38 },
  { date: '2026-01-11', dau: 1360, taskCompletionRate: 0.53, nightCompletionRate: 0.39 },
  { date: '2026-01-12', dau: 1330, taskCompletionRate: 0.52, nightCompletionRate: 0.4 },
  { date: '2026-01-13', dau: 1390, taskCompletionRate: 0.53, nightCompletionRate: 0.41 },
  { date: '2026-01-14', dau: 1420, taskCompletionRate: 0.54, nightCompletionRate: 0.41 },
];

export const mockTaskFunnel: FunnelStage[] = [
  { stage: 'Open Today page', users: 1420, rate: 1 },
  { stage: 'Open task detail', users: 980, rate: 0.69 },
  { stage: 'Complete any task', users: 760, rate: 0.54 },
  { stage: 'Write a note', users: 220, rate: 0.15 },
  { stage: 'Skip', users: 320, rate: 0.23 },
];

export const mockNightFunnel: FunnelStage[] = [
  { stage: 'Enter night entry', users: 680, rate: 1 },
  { stage: 'Start program', users: 520, rate: 0.76 },
  { stage: 'Finish program', users: 280, rate: 0.41 },
  { stage: 'Exit', users: 180, rate: 0.26 },
];

export const mockTaskRanking: TaskRankingItem[] = [
  {
    id: 'TT-1051',
    title: 'Three tiny wins',
    completionRate: 0.7,
    skipRate: 0.13,
    replaceRate: 0.03,
  },
  {
    id: 'TT-1188',
    title: 'Body scan mini',
    completionRate: 0.63,
    skipRate: 0.19,
    replaceRate: 0.04,
  },
  {
    id: 'TT-1024',
    title: 'Morning reset',
    completionRate: 0.62,
    skipRate: 0.17,
    replaceRate: 0.05,
  },
  {
    id: 'TT-1210',
    title: 'Evening release',
    completionRate: 0.51,
    skipRate: 0.29,
    replaceRate: 0.09,
  },
  {
    id: 'TT-1102',
    title: 'Free journal',
    completionRate: 0.35,
    skipRate: 0.41,
    replaceRate: 0.12,
  },
];
